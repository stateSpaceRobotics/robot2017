<launch>
    <!-- Run the map server -->
    <node name="map_server" pkg="map_server" type="map_server" args="$(find cr17)/param/rmc_field_map.yaml"/>

    <!--- Run AMCL, which I think is not needed -->
    <!--<include file="$(find amcl)/examples/amcl_diff.launch" />-->

    <node pkg="tf" type="static_transform_publisher" name="map_to_odom"
          args="0 0 0 0 0 0 1 map odom 100" />
    <node pkg="tf" type="static_transform_publisher" name="baselink_to_robot"
          args="0 0 0 0 0 0 1 base_link robot 100" />

    <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
        <rosparam file="$(find cr17)/param/costmap_common_params.yaml" command="load" ns="global_costmap"/>
        <rosparam file="$(find cr17)/param/costmap_common_params.yaml" command="load" ns="local_costmap"/>
        <rosparam file="$(find cr17)/param/local_costmap_params.yaml" command="load"/>
        <rosparam file="$(find cr17)/param/global_costmap_params.yaml" command="load"/>
        <rosparam file="$(find cr17)/param/base_local_planner_params.yaml" command="load"/>
        <remap from="/move_base_simple/goal" to="/nav_goal"/>
        <remap from="cmd_vel" to="/cr17_diff_drive_controller/cmd_vel"/>
        <param name="base_local_planner" value="teb_local_planner/TebLocalPlannerROS"/>
        <param name="controller_frequency" value="10.0"/>
    </node>
</launch>
